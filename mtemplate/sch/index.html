<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <link href="https://fonts.googleapis.com/css?family=Vazirmatn&display=swap" rel="stylesheet" />
    <link href="main.css" rel="stylesheet" />
    <title>Document</title>
</head>
<body>
<div class="v12_4">
    <div class="v9_105"></div>
    <div class="v9_189"></div>
    <div class="v9_155"></div>
    <span class="v9_156">زنگ سوم</span><span class="v9_157">ساعت ۱:۳۰ تا ۲</span>
    <div class="v9_158"></div>
    <span class="v9_159">زنگ دوم - ریاضی</span><span class="v9_160">ساعت ۱:۳۰ تا ۲</span>
    <div class="v9_162"></div>
    <span class="v9_163">زنگ اول</span><span class="v9_164">ساعت ۱:۳۰ تا ۲</span>
    <div class="v9_166"></div>
    <span class="v9_167">زنگ چهارم</span><span class="v9_168">ساعت ۱:۳۰ تا ۲</span>
    <div class="v9_191"></div>
    <span class="v9_192">زنگ آخر</span><span class="v9_193">ساعت ۱:۳۰ تا ۲</span>
    <div class="v9_195"></div>
    <span class="v9_196">زنگ ششم</span><span class="v9_197">ساعت ۱:۳۰ تا ۲</span>
    <div class="v9_198"></div>
    <span class="v9_199">زنگ پنجم</span><span class="v9_200">ساعت ۱:۳۰ تا ۲</span>
    <div onclick="day(1)" class="v10_59"></div>
    <span  class="v10_63">روز بعدی</span>
    <div onclick="day(-1)" class="v10_60"></div>
    <span  class="v10_61">روز قبلی</span>
</div>
</body>
<script>
    const params = new URLSearchParams(window.location.search);
    const grade = params.get('grade');
    let index = 1;

    const days = ["شنبه", "یکشنبه", "دوشنبه", "سه شنبه", "چهارشنبه"];
    const weekday = document.getElementsByClassName("v10_57")[0];
    const index_translate = ["v9_162", "v9_158", "v9_155", "v9_166", "v9_198", "v9_195", "v9_191"];
    const times_translate = ["زنگ اول", "زنگ دوم", "زنگ سوم", "زنگ چهارم", "زنگ پنچم", "زنگ ششم", "زنگ آخر"];
    const time_index_translate = ["v9_163", "v9_159", "v9_156", "v9_167", "v9_199", "v9_196", "v9_192"];
    let my_plan = {};
    for (let day of days) {
        my_plan[day] = [null, null, null, null, null, null, null];
    }

    my_plan["یکشنبه"][2] = "ریاضی A"
    my_plan["شنبه"][0] = "ریاضی C"
    my_plan["دوشنبه"][6] = "ریاضی F"
    my_plan["چهارشنبه"][4] = "ریاضی F"
    my_plan["سه شنبه"][6] = "عربی B"
    my_plan["شنبه"][6] = "مفاهیم A"

    function day(dy) {
        index += dy;
        if (index < 0) {
            alert("روز اول هستید.");
            index -= dy;
            return;
        }
        if (index > 4) {
            alert("روز اخر هستید.");
            index -= dy;
            return;
        }
        weekday.innerHTML = days[index]
        for (let i = 0; i < 7; i++) {
            let temp = my_plan[days[index]];
            document.getElementsByClassName(time_index_translate[i])[0].innerHTML = times_translate[i];
            if (temp[i] === null) {
                document.getElementsByClassName(index_translate[i])[0].style.backgroundColor = "#fff6df";
                document.getElementsByClassName(index_translate[i])[0].style.borderColor = "#FF8300";
            }
            else {
                document.getElementsByClassName(index_translate[i])[0].style.backgroundColor = "#d1ebe3";
                document.getElementsByClassName(index_translate[i])[0].style.borderColor = "#09966B";
                document.getElementsByClassName(time_index_translate[i])[0].innerHTML += " - " + temp;
            }
        }
    }

    fetch('https://live-box.storage.c2.liara.space/file_transfer.json')
        .then(res => res.json())
        .then(res => {
            let plan = res[grade];
            parent.postMessage(["loading_plan", plan[0]]);
            document.addEventListener("load", (event) => {day(-1)})
        });

</script>
</html>